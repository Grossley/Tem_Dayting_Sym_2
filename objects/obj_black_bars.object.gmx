<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-999999999</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create

fadeAmount = 0;
amount = 0.02
music = mus_rpg1

dialogue_transition = 0
transition = false

show_debug_message("black bars created")
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if room == rm_ending || room == rpg_intro || room == rm_rpg_1 || room == rm_rpg_2 || room == rm_rpg_3 || room == rm_rpg_3to4 || room == rm_rpg_4 || room == rm_rpg_5 || room == rm_rpg_theatre || room == rm_rpg_shy
{
    
}
else
{
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw black bars
draw_set_color(c_black)
draw_rectangle(view_xview[0] + 0,view_yview[0] + 0,view_xview[0] + 53,view_yview[0] + 240,false)
draw_rectangle(view_xview[0] + 374,view_yview[0] + 0,view_xview[0] + 427,view_yview[0] + 240,false)

//Draw dialogue transition
if transition == true
{
    if dialogue_transition &lt; 1
    {
        dialogue_transition += amount
    }
}
else if transition == false
{
    if dialogue_transition &gt; 0
    {
        dialogue_transition -= amount
    }
}

//Draw transition
if instance_exists(obj_player)
{
    if obj_player.targetRoom != 0 &amp;&amp; fadeAmount &lt;= 1
    {
        fadeAmount += amount
    }
    else if obj_player.targetRoom == 0 &amp;&amp; fadeAmount &gt; 0
    {
        fadeAmount -= amount
        if(room == rm_rpg_3to4)
        {
            if obj_player.x &gt; 360
            {
                obj_player.sprite_index = spr_swim_left;
            }
        }
    }
    if room == rm_ending
    {
        fadeAmount -= amount
    }
    
    if fadeAmount &gt;= 1 &amp;&amp; obj_player.targetRoom != 0
    {
        room_goto(obj_player.targetRoom)
        obj_player.targetRoom = 0;
    }
}

draw_set_color(c_black)
draw_set_alpha(dialogue_transition)
draw_rectangle(view_xview[0],view_yview[0],view_xview[0]+1280,view_yview[0]+720,false)
draw_set_alpha(fadeAmount)
draw_rectangle(view_xview[0],view_yview[0],view_xview[0]+1280,view_yview[0]+720,false)
draw_set_alpha(1)

//draw the flower timer
if global.flowerTimer == true
{
    if global.flowerTime &gt; 0 
    {
        global.flowerTime -= 0.0166
        if global.flowerTime &lt;= 10
        {
            draw_set_color(c_red)
        }
        else
        { 
            draw_set_color(c_white)
        }
        draw_set_font(fnt_dialogue_rpg)
        draw_set_valign(fa_center)
        draw_set_halign(fa_center)
        draw_text(view_xview[0]+213,view_yview[0]+5,string(ceil(global.flowerTime)))
    }
    else
    {
        global.flowerTimer = false
        global.gotFlower = false
    }
}

//play music
if room == rm_rpg_3 || room == rm_rpg_3to4 || room == rm_rpg_4 || room == rm_rpg_theatre
{
    if !audio_is_playing(music) &amp;&amp; audio_group_is_loaded(audiogroup_rpg_music)
    {
        audio_group_stop_all(audiogroup_rpg_music)
        audio_play_sound(music, 10, true);
        audio_sound_gain(music,global.music_vol*0.6, 0);
    }
}

//set correct music
if global.flowerTimer == true
{
    if music != mus_rpg2
    {
        music = mus_rpg2
    }
}
else
{
    if music != mus_rpg1
    {
        music = mus_rpg1
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
